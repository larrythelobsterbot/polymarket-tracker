{% extends "base.html" %}

{% block title %}Whale {{ address | address }} - Whale Tracker{% endblock %}

{% block content %}
<div class="page-header">
    <h1>Whale Profile: <span class="monospace">{{ address | address }}</span></h1>
    <p class="text-muted monospace full-address">{{ address }}</p>
</div>

{% if profile %}
<div class="stat-grid">
    <div class="stat-card">
        <span class="stat-card-label">Grade</span>
        <span class="stat-card-value">
            <span class="grade-badge grade-{{ profile.grade | lower }}">{{ profile.grade }}</span>
        </span>
    </div>
    <div class="stat-card">
        <span class="stat-card-label">Win Rate</span>
        <span class="stat-card-value">{{ (profile.win_rate * 100) | round(1) }}%</span>
    </div>
    <div class="stat-card">
        <span class="stat-card-label">Volume</span>
        <span class="stat-card-value">{{ profile.total_volume | usd }}</span>
    </div>
    <div class="stat-card">
        <span class="stat-card-label">Resolved Bets</span>
        <span class="stat-card-value">{{ profile.total_resolved_bets }}</span>
    </div>
</div>

{% if profile.activity_pattern %}
<div class="detail-row">
    <span class="detail-label">Activity Pattern:</span>
    <span>{{ profile.activity_pattern }}</span>
</div>
{% endif %}
{% if profile.roi %}
<div class="detail-row">
    <span class="detail-label">ROI:</span>
    <span>{{ (profile.roi * 100) | round(1) }}%</span>
</div>
{% endif %}
{% if profile.sharpe_ratio %}
<div class="detail-row">
    <span class="detail-label">Sharpe Ratio:</span>
    <span>{{ profile.sharpe_ratio | round(2) }}</span>
</div>
{% endif %}
{% else %}
<div class="empty-state">
    <p>No whale profile found for this address.</p>
    <p class="text-muted">This wallet may not have been profiled yet.</p>
</div>
{% endif %}

<h2 class="section-heading">Recent Bets</h2>

{% if bets %}
<div class="table-wrapper">
    <table class="data-table">
        <thead>
            <tr>
                <th>Time</th>
                <th>Market</th>
                <th>Side</th>
                <th>Amount</th>
                <th>Price</th>
                <th>Outcome</th>
            </tr>
        </thead>
        <tbody>
            {% for bet in bets %}
            <tr>
                <td>{{ bet.timestamp | time_ago }}</td>
                <td>
                    <a href="/markets/{{ bet.market_id }}" class="table-link">
                        {{ bet.market_id | truncate(20) }}
                    </a>
                </td>
                <td>
                    <span class="side-badge side-{{ bet.side | lower }}">{{ bet.side }}</span>
                </td>
                <td>{{ bet.amount | usd }}</td>
                <td>{{ bet.price | round(3) }}</td>
                <td>{{ bet.outcome_bet | default("--") }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
<div class="empty-state">
    <p>No bets recorded for this wallet.</p>
</div>
{% endif %}
{% endblock %}
